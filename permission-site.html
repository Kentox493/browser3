<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Fitur Web API Lengkap</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .description {
            font-size: 1.2rem;
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .category {
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            font-size: 1.6rem;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 200px;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .feature-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .feature-title i {
            font-size: 1.6rem;
        }
        
        .feature-description {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .status {
            font-size: 0.9rem;
            padding: 10px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            margin-top: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .status.success {
            background: rgba(46, 204, 113, 0.3);
            color: #fff;
        }
        
        .status.error {
            background: rgba(231, 76, 60, 0.3);
            color: #fff;
        }
        
        .status.warning {
            background: rgba(241, 196, 15, 0.3);
            color: #fff;
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px;
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 8px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Demo Fitur Web API Lengkap</h1>
            <p class="description">
                Halaman ini mendemonstrasikan berbagai fitur Web API yang tersedia di browser modern.
                Klik pada setiap kartu untuk mencoba fitur yang sesuai. Beberapa fitur memerlukan izin pengguna.
            </p>
        </header>
        
        <h2 class="category">Izin Perangkat</h2>
        <div class="features-grid">
            <!-- Notifications -->
            <div class="feature-card" onclick="requestNotificationPermission()">
                <h3 class="feature-title"><i class="fas fa-bell"></i> Notifications</h3>
                <p class="feature-description">Meminta izin untuk menampilkan notifikasi sistem</p>
                <div class="status" id="notification-status">Status: Belum diizinkan</div>
            </div>
            
            <!-- Location -->
            <div class="feature-card" onclick="getLocation()">
                <h3 class="feature-title"><i class="fas fa-map-marker-alt"></i> Location</h3>
                <p class="feature-description">Mendapatkan lokasi geografis pengguna</p>
                <div class="status" id="location-status">Status: Belum diambil</div>
            </div>
            
            <!-- Camera -->
            <div class="feature-card" onclick="accessCamera()">
                <h3 class="feature-title"><i class="fas fa-camera"></i> Camera</h3>
                <p class="feature-description">Mengakses kamera perangkat</p>
                <div class="status" id="camera-status">Status: Belum diakses</div>
            </div>
            
            <!-- Microphone -->
            <div class="feature-card" onclick="accessMicrophone()">
                <h3 class="feature-title"><i class="fas fa-microphone"></i> Microphone</h3>
                <p class="feature-description">Mengakses mikrofon perangkat</p>
                <div class="status" id="microphone-status">Status: Belum diakses</div>
            </div>
            
            <!-- Camera + Microphone -->
            <div class="feature-card" onclick="accessCameraMicrophone()">
                <h3 class="feature-title"><i class="fas fa-video"></i> Camera + Microphone</h3>
                <p class="feature-description">Mengakses kamera dan mikrofon secara bersamaan</p>
                <div class="status" id="camera-microphone-status">Status: Belum diakses</div>
            </div>
            
            <!-- Screen Share -->
            <div class="feature-card" onclick="shareScreen()">
                <h3 class="feature-title"><i class="fas fa-desktop"></i> Screen Share</h3>
                <p class="feature-description">Berbagi layar atau jendela aplikasi</p>
                <div class="status" id="screenshare-status">Status: Belum diakses</div>
            </div>
            
            <!-- MIDI -->
            <div class="feature-card" onclick="accessMIDI()">
                <h3 class="feature-title"><i class="fas fa-music"></i> MIDI</h3>
                <p class="feature-description">Mengakses perangkat MIDI (Musical Instrument Digital Interface)</p>
                <div class="status" id="midi-status">Status: Belum diakses</div>
            </div>
            
            <!-- Bluetooth -->
            <div class="feature-card" onclick="accessBluetooth()">
                <h3 class="feature-title"><i class="fas fa-bluetooth"></i> Bluetooth</h3>
                <p class="feature-description">Menghubungkan ke perangkat Bluetooth</p>
                <div class="status" id="bluetooth-status">Status: Belum diakses</div>
            </div>
            
            <!-- USB -->
            <div class="feature-card" onclick="accessUSB()">
                <h3 class="feature-title"><i class="fas fa-usb"></i> USB</h3>
                <p class="feature-description">Mengakses perangkat USB</p>
                <div class="status" id="usb-status">Status: Belum diakses</div>
            </div>
            
            <!-- Serial -->
            <div class="feature-card" onclick="accessSerial()">
                <h3 class="feature-title"><i class="fas fa-microchip"></i> Serial</h3>
                <p class="feature-description">Mengakses port serial</p>
                <div class="status" id="serial-status">Status: Belum diakses</div>
            </div>
            
            <!-- HID -->
            <div class="feature-card" onclick="accessHID()">
                <h3 class="feature-title"><i class="fas fa-keyboard"></i> HID</h3>
                <p class="feature-description">Mengakses perangkat HID (Human Interface Device)</p>
                <div class="status" id="hid-status">Status: Belum diakses</div>
            </div>
            
            <!-- NFC -->
            <div class="feature-card" onclick="checkNFC()">
                <h3 class="feature-title"><i class="fas fa-wave-square"></i> NFC</h3>
                <p class="feature-description">Membaca dan menulis tag NFC</p>
                <div class="status" id="nfc-status">Status: Belum diperiksa</div>
            </div>
        </div>
        
        <h2 class="category">Izin Sistem & Tampilan</h2>
        <div class="features-grid">
            <!-- Fullscreen -->
            <div class="feature-card" onclick="toggleFullscreen()">
                <h3 class="feature-title"><i class="fas fa-expand"></i> Fullscreen</h3>
                <p class="feature-description">Meminta mode layar penuh</p>
                <div class="status" id="fullscreen-status">Status: Normal</div>
            </div>
            
            <!-- Pointer Lock -->
            <div class="feature-card" onclick="togglePointerLock()">
                <h3 class="feature-title"><i class="fas fa-mouse-pointer"></i> Pointer Lock</h3>
                <p class="feature-description">Mengunci pointer mouse</p>
                <div class="status" id="pointerlock-status">Status: Tidak terkunci</div>
            </div>
            
            <!-- Keyboard Lock -->
            <div class="feature-card" onclick="toggleKeyboardLock()">
                <h3 class="feature-title"><i class="fas fa-keyboard"></i> Keyboard Lock</h3>
                <p class="feature-description">Mengunci keyboard untuk kunci tertentu</p>
                <div class="status" id="keyboardlock-status">Status: Tidak terkunci</div>
            </div>
            
            <!-- Clipboard -->
            <div class="feature-card" onclick="copyToClipboard()">
                <h3 class="feature-title"><i class="fas fa-clipboard"></i> Async Clipboard API</h3>
                <p class="feature-description">Mengakses clipboard secara asynchronous</p>
                <div class="status" id="clipboard-status">Klik untuk menyalin teks</div>
            </div>
            
            <!-- Idle Detection -->
            <div class="feature-card" onclick="detectIdle()">
                <h3 class="feature-title"><i class="fas fa-user-clock"></i> Idle Detection</h3>
                <p class="feature-description">Mendeteksi ketika pengguna tidak aktif</p>
                <div class="status" id="idle-status">Status: Belum dimulai</div>
            </div>
            
            <!-- Persistent Storage -->
            <div class="feature-card" onclick="requestStorage()">
                <h3 class="feature-title"><i class="fas fa-database"></i> Persistent Storage</h3>
                <p class="feature-description">Meminta penyimpanan persisten untuk data</p>
                <div class="status" id="storage-status">Status: Belum diminta</div>
            </div>
            
            <!-- Protocol Handler -->
            <div class="feature-card" onclick="registerProtocol()">
                <h3 class="feature-title"><i class="fas fa-link"></i> Protocol Handler</h3>
                <p class="feature-description">Mendaftarkan aplikasi sebagai penangan protokol khusus</p>
                <div class="status" id="protocol-status">Status: Belum didaftarkan</div>
            </div>
            
            <!-- WebAuthn -->
            <div class="feature-card" onclick="checkWebAuthn()">
                <h3 class="feature-title"><i class="fas fa-fingerprint"></i> WebAuthn</h3>
                <p class="feature-description">Autentikasi dengan kredensial web</p>
                <div class="status" id="webauthn-status">Status: Belum diperiksa</div>
            </div>
            
            <!-- Payment Request -->
            <div class="feature-card" onclick="requestPayment()">
                <h3 class="feature-title"><i class="fas fa-credit-card"></i> Payment Request</h3>
                <p class="feature-description">Meminta pembayaran dari pengguna</p>
                <div class="status" id="payment-status">Status: Belum diminta</div>
            </div>
            
            <!-- Contacts -->
            <div class="feature-card" onclick="accessContacts()">
                <h3 class="feature-title"><i class="fas fa-address-book"></i> Contacts</h3>
                <p class="feature-description">Mengakses kontak pengguna</p>
                <div class="status" id="contacts-status">Status: Belum diakses</div>
            </div>
            
            <!-- Fonts -->
            <div class="feature-card" onclick="accessFonts()">
                <h3 class="feature-title"><i class="fas fa-font"></i> Fonts</h3>
                <p class="feature-description">Mengakses font yang tersedia di sistem</p>
                <div class="status" id="fonts-status">Status: Belum diakses</div>
            </div>
        </div>
        
        <h2 class="category">Sensor & Perangkat Keras</h2>
        <div class="features-grid">
            <!-- Device Orientation -->
            <div class="feature-card" onclick="checkDeviceOrientation()">
                <h3 class="feature-title"><i class="fas fa-compress-arrows-alt"></i> Device Orientation</h3>
                <p class="feature-description">Mendeteksi orientasi perangkat</p>
                <div class="status" id="orientation-status">Status: Belum diakses</div>
            </div>
            
            <!-- Device Motion -->
            <div class="feature-card" onclick="checkDeviceMotion()">
                <h3 class="feature-title"><i class="fas fa-running"></i> Device Motion</h3>
                <p class="feature-description">Mendeteksi gerakan perangkat</p>
                <div class="status" id="motion-status">Status: Belum diakses</div>
            </div>
            
            <!-- Virtual Reality (VR) -->
            <div class="feature-card" onclick="checkVR()">
                <h3 class="feature-title"><i class="fas fa-vr-cardboard"></i> Virtual Reality (VR)</h3>
                <p class="feature-description">Memeriksa dukungan VR</p>
                <div class="status" id="vr-status">Status: Belum diperiksa</div>
            </div>
            
            <!-- Augmented Reality (AR) -->
            <div class="feature-card" onclick="checkAR()">
                <h3 class="feature-title"><i class="fas fa-cube"></i> Augmented Reality (AR)</h3>
                <p class="feature-description">Memeriksa dukungan AR</p>
                <div class="status" id="ar-status">Status: Belum diperiksa</div>
            </div>
            
            <!-- Ambient Light -->
            <div class="feature-card" onclick="checkAmbientLight()">
                <h3 class="feature-title"><i class="fas fa-sun"></i> Ambient Light</h3>
                <p class="feature-description">Mendeteksi tingkat cahaya sekitar</p>
                <div class="status" id="ambientlight-status">Status: Belum diakses</div>
            </div>
            
            <!-- Battery Status -->
            <div class="feature-card" onclick="checkBattery()">
                <h3 class="feature-title"><i class="fas fa-battery-three-quarters"></i> Battery Status</h3>
                <p class="feature-description">Memeriksa status baterai perangkat</p>
                <div class="status" id="battery-status">Status: Belum diperiksa</div>
            </div>
            
            <!-- Vibration -->
            <div class="feature-card" onclick="vibrateDevice()">
                <h3 class="feature-title"><i class="fas fa-vibrate"></i> Vibration</h3>
                <p class="feature-description">Menggetarkan perangkat (jika didukung)</p>
                <div class="status" id="vibration-status">Status: Klik untuk mencoba</div>
            </div>
            
            <!-- Wake Lock -->
            <div class="feature-card" onclick="toggleWakeLock()">
                <h3 class="feature-title"><i class="fas fa-coffee"></i> Wake Lock</h3>
                <p class="feature-description">Mencegah layar menjadi tidur</p>
                <div class="status" id="wakelock-status">Status: Tidak aktif</div>
            </div>
        </div>
        
        <h2 class="category">Media & Penyimpanan</h2>
        <div class="features-grid">
            <!-- Show Open File Picker -->
            <div class="feature-card" onclick="openFilePicker()">
                <h3 class="feature-title"><i class="fas fa-file"></i> Show Open File Picker</h3>
                <p class="feature-description">Menampilkan dialog pemilih file</p>
                <div class="status" id="filepicker-status">Status: Belum dibuka</div>
            </div>
            
            <!-- Show Directory Picker -->
            <div class="feature-card" onclick="openDirectoryPicker()">
                <h3 class="feature-title"><i class="fas fa-folder"></i> Show Directory Picker</h3>
                <p class="feature-description">Menampilkan dialog pemilih direktori</p>
                <div class="status" id="directorypicker-status">Status: Belum dibuka</div>
            </div>
            
            <!-- Encrypted Media (EME) -->
            <div class="feature-card" onclick="checkEME()">
                <h3 class="feature-title"><i class="fas fa-lock"></i> Encrypted Media (EME)</h3>
                <p class="feature-description">Memeriksa dukungan media terenkripsi</p>
                <div class="status" id="eme-status">Status: Belum diperiksa</div>
            </div>
            
            <!-- Copy -->
            <div class="feature-card" onclick="copyContent()">
                <h3 class="feature-title"><i class="fas fa-copy"></i> Copy</h3>
                <p class="feature-description">Menyalin konten ke clipboard</p>
                <div class="status" id="copy-status">Status: Klik untuk menyalin</div>
            </div>
            
            <!-- Auto Download -->
            <div class="feature-card" onclick="autoDownload()">
                <h3 class="feature-title"><i class="fas fa-download"></i> Auto Download</h3>
                <p class="feature-description">Mengunduh file secara otomatis</p>
                <div class="status" id="download-status">Status: Klik untuk mengunduh</div>
            </div>
            
            <!-- Popup -->
            <div class="feature-card" onclick="showPopup()">
                <h3 class="feature-title"><i class="fas fa-window-restore"></i> Popup</h3>
                <p class="feature-description">Menampilkan popup window</p>
                <div class="status" id="popup-status">Klik untuk membuka popup</div>
            </div>
            
            <!-- Popup (delayed 5 seconds) -->
            <div class="feature-card" onclick="showDelayedPopup()">
                <h3 class="feature-title"><i class="fas fa-clock"></i> Popup (delayed 5 seconds)</h3>
                <p class="feature-description">Menampilkan popup setelah 5 detik</p>
                <div class="status" id="delayed-popup-status">Klik untuk menjadwalkan</div>
            </div>
        </div>
        
        <div class="instructions">
            <h2>Petunjuk Penggunaan</h2>
            <p>Klik pada setiap kartu fitur untuk mengaktifkannya. Beberapa fitur memerlukan izin dari pengguna.</p>
            <p>Halaman ini hanya demonstrasi, beberapa fitur mungkin tidak bekerja di semua browser atau memerlukan konteks HTTPS.</p>
        </div>
        
        <footer>
            <p>Â© 2023 Demo Fitur Web API Lengkap | Hak Cipta Dilindungi</p>
        </footer>
    </div>

    <script>
        // Notifications
        function requestNotificationPermission() {
            if (!("Notification" in window)) {
                updateStatus('notification-status', 'Browser tidak mendukung notifikasi', 'error');
                return;
            }
            
            Notification.requestPermission().then(permission => {
                updateStatus('notification-status', `Izin: ${permission}`, permission === 'granted' ? 'success' : 'error');
                
                if (permission === "granted") {
                    new Notification("Demo Notifikasi", {
                        body: "Ini adalah contoh notifikasi!",
                        icon: "https://example.com/icon.png"
                    });
                }
            });
        }
        
        // Location
        function getLocation() {
            if (!navigator.geolocation) {
                updateStatus('location-status', 'Geolocation tidak didukung', 'error');
                return;
            }
            
            updateStatus('location-status', 'Mendapatkan lokasi...', '');
            
            navigator.geolocation.getCurrentPosition(
                position => {
                    updateStatus('location-status', `Lokasi berhasil didapatkan`, 'success');
                },
                error => {
                    updateStatus('location-status', `Gagal: ${error.message}`, 'error');
                }
            );
        }
        
        // Camera
        function accessCamera() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                updateStatus('camera-status', 'Akses kamera tidak didukung', 'error');
                return;
            }
            
            updateStatus('camera-status', 'Meminta akses kamera...', '');
            
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    updateStatus('camera-status', 'Kamera diizinkan', 'success');
                    // Menutup stream setelah demo
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(error => {
                    updateStatus('camera-status', `Gagal: ${error.message}`, 'error');
                });
        }
        
        // Microphone
        function accessMicrophone() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                updateStatus('microphone-status', 'Akses mikrofon tidak didukung', 'error');
                return;
            }
            
            updateStatus('microphone-status', 'Meminta akses mikrofon...', '');
            
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(stream => {
                    updateStatus('microphone-status', 'Mikrofon diizinkan', 'success');
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(error => {
                    updateStatus('microphone-status', `Gagal: ${error.message}`, 'error');
                });
        }
        
        // Camera + Microphone
        function accessCameraMicrophone() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                updateStatus('camera-microphone-status', 'Akses kamera/mikrofon tidak didukung', 'error');
                return;
            }
            
            updateStatus('camera-microphone-status', 'Meminta akses kamera dan mikrofon...', '');
            
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then(stream => {
                    updateStatus('camera-microphone-status', 'Kamera dan mikrofon diizinkan', 'success');
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(error => {
                    updateStatus('camera-microphone-status', `Gagal: ${error.message}`, 'error');
                });
        }
        
        // Screen Share
        function shareScreen() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {
                updateStatus('screenshare-status', 'Berbagi layar tidak didukung', 'error');
                return;
            }
            
            updateStatus('screenshare-status', 'Meminta berbagi layar...', '');
            
            navigator.mediaDevices.getDisplayMedia({ video: true })
                .then(stream => {
                    updateStatus('screenshare-status', 'Berbagi layar diizinkan', 'success');
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(error => {
                    updateStatus('screenshare-status', `Gagal: ${error.message}`, 'error');
                });
        }
        
        // MIDI
        function accessMIDI() {
            if (!navigator.requestMIDIAccess) {
                updateStatus('midi-status', 'Web MIDI API tidak didukung', 'error');
                return;
            }
            
            updateStatus('midi-status', 'Meminta akses MIDI...', '');
            
            navigator.requestMIDIAccess()
                .then(midiAccess => {
                    updateStatus('midi-status', `MIDI diizinkan, ${midiAccess.inputs.size} input`, 'success');
                })
                .catch(error => {
                    updateStatus('midi-status', `Gagal: ${error.message}`, 'error');
                });
        }
        
        // Bluetooth
        function accessBluetooth() {
            if (!navigator.bluetooth) {
                updateStatus('bluetooth-status', 'Web Bluetooth tidak didukung', 'error');
                return;
            }
            
            updateStatus('bluetooth-status', 'Meminta akses Bluetooth...', '');
            
            navigator.bluetooth.requestDevice({
                acceptAllDevices: true
            })
            .then(device => {
                updateStatus('bluetooth-status', `Terhubung ke: ${device.name}`, 'success');
            })
            .catch(error => {
                updateStatus('bluetooth-status', `Gagal: ${error.message}`, 'error');
            });
        }
        
        // USB
        function accessUSB() {
            if (!navigator.usb) {
                updateStatus('usb-status', 'WebUSB tidak didukung', 'error');
                return;
            }
            
            updateStatus('usb-status', 'Meminta akses USB...', '');
            
            navigator.usb.requestDevice({ filters: [] })
            .then(device => {
                updateStatus('usb-status', `Terhubung ke: ${device.productName}`, 'success');
            })
            .catch(error => {
                updateStatus('usb-status', `Gagal: ${error.message}`, 'error');
            });
        }
        
        // Serial
        function accessSerial() {
            if (!navigator.serial) {
                updateStatus('serial-status', 'Web Serial API tidak didukung', 'error');
                return;
            }
            
            updateStatus('serial-status', 'Meminta akses Serial...', '');
            
            navigator.serial.requestPort()
            .then(port => {
                updateStatus('serial-status', 'Port serial terpilih', 'success');
            })
            .catch(error => {
                updateStatus('serial-status', `Gagal: ${error.message}`, 'error');
            });
        }
        
        // HID
        function accessHID() {
            if (!navigator.hid) {
                updateStatus('hid-status', 'WebHID API tidak didukung', 'error');
                return;
            }
            
            updateStatus('hid-status', 'Meminta akses HID...', '');
            
            navigator.hid.requestDevice({ filters: [] })
            .then(devices => {
                updateStatus('hid-status', `Terhubung ke ${devices.length} perangkat`, 'success');
            })
            .catch(error => {
                updateStatus('hid-status', `Gagal: ${error.message}`, 'error');
            });
        }
        
        // Fullscreen
        function toggleFullscreen() {
            if (!document.fullscreenEnabled) {
                updateStatus('fullscreen-status', 'Mode layar penuh tidak didukung', 'error');
                return;
            }
            
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen()
                    .then(() => {
                        updateStatus('fullscreen-status', 'Layar penuh aktif', 'success');
                    })
                    .catch(err => {
                        updateStatus('fullscreen-status', `Error: ${err.message}`, 'error');
                    });
            } else {
                document.exitFullscreen();
                updateStatus('fullscreen-status', 'Mode normal', '');
            }
        }
        
        // Pointer Lock
        function togglePointerLock() {
            if (!document.pointerLockElement) {
                document.body.requestPointerLock();
                updateStatus('pointerlock-status', 'Pointer terkunci', 'success');
            } else {
                document.exitPointerLock();
                updateStatus('pointerlock-status', 'Pointer tidak terkunci', '');
            }
        }
        
        // Keyboard Lock
        function toggleKeyboardLock() {
            if (!navigator.keyboard || !navigator.keyboard.lock) {
                updateStatus('keyboardlock-status', 'Keyboard Lock API tidak didukung', 'error');
                return;
            }
            
            if (!document.keyboardLock) {
                navigator.keyboard.lock(['KeyA', 'KeyB'])
                    .then(() => {
                        document.keyboardLock = true;
                        updateStatus('keyboardlock-status', 'Keyboard terkunci', 'success');
                    })
                    .catch(err => {
                        updateStatus('keyboardlock-status', `Gagal: ${err.message}`, 'error');
                    });
            } else {
                navigator.keyboard.unlock();
                document.keyboardLock = false;
                updateStatus('keyboardlock-status', 'Keyboard tidak terkunci', '');
            }
        }
        
        // Clipboard
        function copyToClipboard() {
            if (!navigator.clipboard) {
                updateStatus('clipboard-status', 'Clipboard API tidak didukung', 'error');
                return;
            }
            
            navigator.clipboard.writeText('Teks contoh dari demo Web API')
                .then(() => {
                    updateStatus('clipboard-status', 'Teks disalin ke clipboard', 'success');
                })
                .catch(err => {
                    updateStatus('clipboard-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Device Orientation
        function checkDeviceOrientation() {
            if (!window.DeviceOrientationEvent) {
                updateStatus('orientation-status', 'Device Orientation tidak didukung', 'error');
                return;
            }
            
            updateStatus('orientation-status', 'Mendeteksi orientasi perangkat...', '');
            
            window.addEventListener('deviceorientation', function(event) {
                updateStatus('orientation-status', `Alpha: ${event.alpha.toFixed(2)}, Beta: ${event.beta.toFixed(2)}, Gamma: ${event.gamma.toFixed(2)}`, 'success');
            });
        }
        
        // Device Motion
        function checkDeviceMotion() {
            if (!window.DeviceMotionEvent) {
                updateStatus('motion-status', 'Device Motion tidak didukung', 'error');
                return;
            }
            
            updateStatus('motion-status', 'Mendeteksi gerakan perangkat...', '');
            
            window.addEventListener('devicemotion', function(event) {
                updateStatus('motion-status', `Akselerasi: x=${event.acceleration.x?.toFixed(2)}, y=${event.acceleration.y?.toFixed(2)}, z=${event.acceleration.z?.toFixed(2)}`, 'success');
            });
        }
        
        // VR
        function checkVR() {
            if (!navigator.xr) {
                updateStatus('vr-status', 'WebXR API tidak didukung', 'error');
                return;
            }
            
            updateStatus('vr-status', 'Memeriksa dukungan VR...', '');
            
            navigator.xr.isSessionSupported('immersive-vr')
                .then(supported => {
                    updateStatus('vr-status', supported ? 'VR didukung' : 'VR tidak didukung', supported ? 'success' : 'error');
                })
                .catch(error => {
                    updateStatus('vr-status', `Error: ${error.message}`, 'error');
                });
        }
        
        // AR
        function checkAR() {
            if (!navigator.xr) {
                updateStatus('ar-status', 'WebXR API tidak didukung', 'error');
                return;
            }
            
            updateStatus('ar-status', 'Memeriksa dukungan AR...', '');
            
            navigator.xr.isSessionSupported('immersive-ar')
                .then(supported => {
                    updateStatus('ar-status', supported ? 'AR didukung' : 'AR tidak didukung', supported ? 'success' : 'error');
                })
                .catch(error => {
                    updateStatus('ar-status', `Error: ${error.message}`, 'error');
                });
        }
        
        // NFC
        function checkNFC() {
            if (!('NDEFReader' in window)) {
                updateStatus('nfc-status', 'Web NFC API tidak didukung', 'error');
                return;
            }
            
            updateStatus('nfc-status', 'Web NFC didukung', 'success');
        }
        
        // WebAuthn
        function checkWebAuthn() {
            if (!window.PublicKeyCredential) {
                updateStatus('webauthn-status', 'WebAuthn tidak didukung', 'error');
                return;
            }
            
            updateStatus('webauthn-status', 'WebAuthn didukung', 'success');
        }
        
        // Popup
        function showPopup() {
            const popup = window.open('', '_blank', 'width=400,height=300');
            if (!popup || popup.closed || typeof popup.closed == 'undefined') {
                updateStatus('popup-status', 'Popup diblokir oleh browser', 'error');
                return;
            }
            
            popup.document.write('<html><head><title>Demo Popup</title></head>');
            popup.document.write('<body style="display: flex; justify-content: center; align-items: center; height: 100%;">');
            popup.document.write('<h2>Ini adalah contoh popup!</h2>');
            popup.document.write('</body></html>');
            popup.document.close();
            
            updateStatus('popup-status', 'Popup dibuka', 'success');
        }
        
        // Delayed Popup
        function showDelayedPopup() {
            updateStatus('delayed-popup-status', 'Popup akan terbuka dalam 5 detik...', '');
            
            setTimeout(() => {
                showPopup();
                updateStatus('delayed-popup-status', 'Popup dibuka (setelah 5 detik)', 'success');
            }, 5000);
        }
        
        // Idle Detection
        function detectIdle() {
            if (!('IdleDetector' in window)) {
                updateStatus('idle-status', 'Idle Detection API tidak didukung', 'error');
                return;
            }
            
            updateStatus('idle-status', 'Mendeteksi status idle...', '');
            
            IdleDetector.requestPermission()
                .then(() => {
                    const idleDetector = new IdleDetector();
                    idleDetector.start({
                        threshold: 60000,
                        signal: new AbortController().signal
                    }).then(() => {
                        idleDetector.addEventListener('change', () => {
                            updateStatus('idle-status', `Status: ${idleDetector.userState}, Layar: ${idleDetector.screenState}`, 'success');
                        });
                    });
                })
                .catch(err => {
                    updateStatus('idle-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Persistent Storage
        function requestStorage() {
            if (!navigator.storage || !navigator.storage.persist) {
                updateStatus('storage-status', 'Persistent Storage API tidak didukung', 'error');
                return;
            }
            
            updateStatus('storage-status', 'Meminta penyimpanan persisten...', '');
            
            navigator.storage.persist()
                .then(granted => {
                    updateStatus('storage-status', granted ? 'Penyimpanan persisten diizinkan' : 'Penyimpanan persisten ditolak', granted ? 'success' : 'error');
                })
                .catch(err => {
                    updateStatus('storage-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Protocol Handler
        function registerProtocol() {
            if (!navigator.registerProtocolHandler) {
                updateStatus('protocol-status', 'Protocol Handler API tidak didukung', 'error');
                return;
            }
            
            updateStatus('protocol-status', 'Mendaftarkan penangan protokol...', '');
            
            try {
                navigator.registerProtocolHandler(
                    'web+demo',
                    window.location.origin + '/handler.html?uri=%s',
                    'Demo Protocol Handler'
                );
                updateStatus('protocol-status', 'Protokol didaftarkan', 'success');
            } catch (err) {
                updateStatus('protocol-status', `Gagal: ${err.message}`, 'error');
            }
        }
        
        // Payment Request
        function requestPayment() {
            if (!window.PaymentRequest) {
                updateStatus('payment-status', 'Payment Request API tidak didukung', 'error');
                return;
            }
            
            updateStatus('payment-status', 'Meminta pembayaran...', '');
            
            const supportedInstruments = [{
                supportedMethods: 'basic-card'
            }];
            
            const details = {
                total: {
                    label: 'Total',
                    amount: {
                        currency: 'USD',
                        value: '10.00'
                    }
                }
            };
            
            const request = new PaymentRequest(supportedInstruments, details);
            
            request.show()
                .then(response => {
                    response.complete('success');
                    updateStatus('payment-status', 'Pembayaran berhasil', 'success');
                })
                .catch(err => {
                    updateStatus('payment-status', `Pembayaran dibatalkan: ${err.message}`, 'error');
                });
        }
        
        // Contacts
        function accessContacts() {
            if (!navigator.contacts || !navigator.contacts.select) {
                updateStatus('contacts-status', 'Contacts API tidak didukung', 'error');
                return;
            }
            
            updateStatus('contacts-status', 'Meminta akses kontak...', '');
            
            navigator.contacts.select(['name', 'email', 'tel'], { multiple: true })
                .then(contacts => {
                    updateStatus('contacts-status', `Mengakses ${contacts.length} kontak`, 'success');
                })
                .catch(err => {
                    updateStatus('contacts-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Fonts
        function accessFonts() {
            if (!navigator.fonts) {
                updateStatus('fonts-status', 'Font Access API tidak didukung', 'error');
                return;
            }
            
            updateStatus('fonts-status', 'Meminta akses font...', '');
            
            navigator.fonts.query()
                .then(fonts => {
                    updateStatus('fonts-status', `Terdapat ${fonts.length} font tersedia`, 'success');
                })
                .catch(err => {
                    updateStatus('fonts-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Ambient Light
        function checkAmbientLight() {
            if (!window.AmbientLightSensor) {
                updateStatus('ambientlight-status', 'Ambient Light Sensor tidak didukung', 'error');
                return;
            }
            
            updateStatus('ambientlight-status', 'Mendeteksi cahaya sekitar...', '');
            
            try {
                const sensor = new AmbientLightSensor();
                sensor.addEventListener('reading', () => {
                    updateStatus('ambientlight-status', `Cahaya: ${sensor.illuminance} lux`, 'success');
                });
                sensor.start();
            } catch (err) {
                updateStatus('ambientlight-status', `Gagal: ${err.message}`, 'error');
            }
        }
        
        // Battery Status
        function checkBattery() {
            if (!navigator.getBattery) {
                updateStatus('battery-status', 'Battery Status API tidak didukung', 'error');
                return;
            }
            
            updateStatus('battery-status', 'Memeriksa status baterai...', '');
            
            navigator.getBattery()
                .then(battery => {
                    updateStatus('battery-status', `Baterai: ${Math.floor(battery.level * 100)}%, ${battery.charging ? 'Sedang diisi' : 'Tidak diisi'}`, 'success');
                })
                .catch(err => {
                    updateStatus('battery-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Vibration
        function vibrateDevice() {
            if (!navigator.vibrate) {
                updateStatus('vibration-status', 'Vibration API tidak didukung', 'error');
                return;
            }
            
            updateStatus('vibration-status', 'Menggetarkan perangkat...', '');
            
            navigator.vibrate([200, 100, 200]);
            updateStatus('vibration-status', 'Perangkat digetarkan', 'success');
        }
        
        // Wake Lock
        function toggleWakeLock() {
            if (!navigator.wakeLock) {
                updateStatus('wakelock-status', 'Wake Lock API tidak didukung', 'error');
                return;
            }
            
            if (!window.wakeLock) {
                navigator.wakeLock.request('screen')
                    .then(wl => {
                        window.wakeLock = wl;
                        updateStatus('wakelock-status', 'Wake Lock aktif', 'success');
                    })
                    .catch(err => {
                        updateStatus('wakelock-status', `Gagal: ${err.message}`, 'error');
                    });
            } else {
                window.wakeLock.release();
                window.wakeLock = null;
                updateStatus('wakelock-status', 'Wake Lock nonaktif', '');
            }
        }
        
        // Open File Picker
        function openFilePicker() {
            if (!window.showOpenFilePicker) {
                updateStatus('filepicker-status', 'File System Access API tidak didukung', 'error');
                return;
            }
            
            updateStatus('filepicker-status', 'Membuka pemilih file...', '');
            
            showOpenFilePicker()
                .then(fileHandles => {
                    updateStatus('filepicker-status', `Memilih ${fileHandles.length} file`, 'success');
                })
                .catch(err => {
                    updateStatus('filepicker-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // Open Directory Picker
        function openDirectoryPicker() {
            if (!window.showDirectoryPicker) {
                updateStatus('directorypicker-status', 'Directory Picker API tidak didukung', 'error');
                return;
            }
            
            updateStatus('directorypicker-status', 'Membuka pemilih direktori...', '');
            
            showDirectoryPicker()
                .then(directoryHandle => {
                    updateStatus('directorypicker-status', 'Direktori dipilih', 'success');
                })
                .catch(err => {
                    updateStatus('directorypicker-status', `Gagal: ${err.message}`, 'error');
                });
        }
        
        // EME
        function checkEME() {
            if (!navigator.requestMediaKeySystemAccess) {
                updateStatus('eme-status', 'Encrypted Media Extensions tidak didukung', 'error');
                return;
            }
            
            updateStatus('eme-status', 'Memeriksa dukungan EME...', '');
            
            navigator.requestMediaKeySystemAccess('org.w3.clearkey', [{
                initDataTypes: ['keyids'],
                audioCapabilities: [{ contentType: 'audio/mp4; codecs="mp4a.40.2"' }],
                videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }]
            }])
            .then(access => {
                updateStatus('eme-status', 'EME didukung', 'success');
            })
            .catch(err => {
                updateStatus('eme-status', `EME tidak didukung: ${err.message}`, 'error');
            });
        }
        
        // Copy
        function copyContent() {
            const tempElement = document.createElement('textarea');
            tempElement.value = 'Ini adalah contoh teks yang disalin dari demo Web API';
            document.body.appendChild(tempElement);
            tempElement.select();
            
            try {
                const successful = document.execCommand('copy');
                updateStatus('copy-status', successful ? 'Teks disalin' : 'Gagal menyalin', successful ? 'success' : 'error');
            } catch (err) {
                updateStatus('copy-status', `Gagal: ${err.message}`, 'error');
            }
            
            document.body.removeChild(tempElement);
        }
        
        // Auto Download
        function autoDownload() {
            updateStatus('download-status', 'Mengunduh file...', '');
            
            const blob = new Blob(['Ini adalah contoh file yang diunduh'], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'contoh-file.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            updateStatus('download-status', 'File diunduh', 'success');
        }
        
        // Utility function untuk update status
        function updateStatus(elementId, message, statusClass) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = 'status';
            
            if (statusClass) {
                element.classList.add(statusClass);
            }
        }
        
        // Event listener untuk keluar dari fullscreen dan pointer lock
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                updateStatus('fullscreen-status', 'Mode normal', '');
            }
        });
        
        document.addEventListener('pointerlockchange', () => {
            if (!document.pointerLockElement) {
                updateStatus('pointerlock-status', 'Pointer tidak terkunci', '');
            }
        });
    </script>
</body>
</html>
